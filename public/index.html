<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Test Hoory">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="preconnect" href="https://app.hoory.com">
  <link rel="dns-prefetch" href="//hoory.com">
  <link rel="dns-prefetch" href="//amazonaws.com">
  <title>TEST HOORY</title>
</head>
<body style="background: #e3e3e3;">
<div style="
    display: flex;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    flex-direction: column;
    font-size: 21px;
">
  Hello, I'm Hoory test website
  <button onclick="window.location.reload()" style="
    margin-top: 17px;
">Reload</button>
</div>



<!--     <script>
      window.hoorySettings = {"position":"right","type":"standard","launcherTitle":"Chat with us"};
      (function(d,t) {
        var BASE_URL="https://app.hoory.com";
        var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=BASE_URL+"/packs/js/sdk.js";
        g.defer = true;
        g.async = true;
        s.parentNode.insertBefore(g,s);
        g.onload=function(){
          window.hoorySDK.run({
            websiteToken: 'xr5mbyA1ZueF2pP1KGRwzaFd',
            baseUrl: BASE_URL
          })
        }
      })(document,"script");
    </script> -->
    


<!-- 
<script>
  window.hoorySettings = {
    position: 'right',
    type: 'standard',
    launcherTitle: 'Chat with us',
    autoOpenUnreadConversation: true,
    lazyLoad: true,
    avatar: 'https://avatars.githubusercontent.com/u/6254009?v=4',
  };
  (function(d, t) {
    var BASE_URL = 'https://qa-3.hoory.com';
    var g = d.createElement(t);
  var s = d.getElementsByTagName(t)[0];
    g.src = BASE_URL + '/packs/js/sdk.js';
    g.defer = true;
    g.async = true;
    s.parentNode.insertBefore(g, s);
    g.onload = function() {
      window.hoorySDK.run({
        websiteToken: 'BMKamiDur4m3YFedNnh5fDNL',
        baseUrl: BASE_URL,
      });

      window.hoorySDK.runSecond({
        websiteToken: 'bvPQR7f7UQBuS8b3zH6qU7CW',
        baseUrl: BASE_URL,
      });
    };
  })(document, 'script');

  // window.addEventListener("hoory:error", function (data) {
  //   console.log("Error loading hoory! :", data);
  // });
</script>
 -->

  <script src="https://app.hoory.com/packs/js/sdk.js" async defer></script>
<script>
  let isInit = false;
  let timeout;

  document.addEventListener('DOMContentLoaded', () => {
    const hooryTrigger = (e) => {
      e.preventDefault();
      e.stopPropagation();

      if (window.$hoory2) {
        window.$hoory2.toggle();
      }
    }

    const url = "https://app.hoory.com"

    window.hoorySettings = { lazyLoad: true };
    const syncHoorySDK = () => {
      const settings = {
        websiteToken: "icQUgtPPemEj5UModj4vmnKk",
        baseUrl: url,
      }

      const settings2 = {
        websiteToken: "XTPwMdTFEnQLke4rnvrWQdWq",
        baseUrl: url,
        settings: {
          lazyLoad: true,
          position: "left",
          type: "standard",
          hideMessageBubble: true,
        }
      }

      if (!isInit) {
        window.hoorySDK.run(settings);
        window.hoorySDK.runSecond(settings2);

        isInit = true;
      }


      const triggers =
        document.querySelectorAll('[href="https://hoory-script.script"]');

      triggers.forEach(e => e.removeEventListener('click', hooryTrigger));
      triggers.forEach(e => e.addEventListener('click', hooryTrigger));
    }


    syncHoorySDK();

    const nextMeta = document.querySelector('meta[name="next-head-count"]');
    const observer = new MutationObserver(mutations => {
      mutations.forEach((mutation) => {
        if (mutation.type === "attributes") {
          syncHoorySDK()
        }
      });
    });
    observer.observe(nextMeta, {attributes: true});
  })
</script>



</body>
</html>
